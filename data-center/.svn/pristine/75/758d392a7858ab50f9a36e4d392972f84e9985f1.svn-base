/*! taomee tongji javascript code by maverick 2015-02-04 */
!function(a){function b(){}function c(){}Highcharts.setOptions({lang:{numericSymbols:null,thousandsSep:",",rangeSelectorZoom:"显示时间段:"},global:{useUTC:!1}}),b.prototype={colors:{navy_blue:{rangeSelectorColor:"#8294B8",rangeSelectorHover:"#4F638C",colors:["#4572A7","#AA4643","#89A54E","#80699B","#3D96AE","#DB843D","#92A8CD","#A47D7C","#B5CA92"]},green:{rangeSelectorColor:"#8EC657",rangeSelectorHover:"#B3EC7C",colors:["#89A54E","#4572A7","#AA4643","#80699B","#3D96AE","#DB843D","#92A8CD","#A47D7C","#B5CA92"]},orange:{rangeSelectorColor:"#8E7E6E",rangeSelectorHover:"#BEA280",colors:["#6CC4ED","#E7A944","#9D8C7A","#72CB68","#9B65FA","#BADC36","#FC71A6","#20CFC8","#E2E204"]}},getColors:function(a){return a=a?a:"orange",this.colors[a]},getXAxis:function(a,b,c){var d=this,e=[];return e.push({categories:a,tickInterval:d._getXAxisTickInterval(a),labels:{style:{fontSize:"12px"}},title:{text:b[0]?b[0]:"",align:"high",style:{color:"#999"}}}),c.length&&e.push({linkedTo:0,categories:c,labels:{style:{fontSize:"12px",color:"#6CC4ED"},format:"{value}"},opposite:!0}),e},_getXAxisTickInterval:function(a){return Math.ceil(a.length/15)},getYAxis:function(a,b,c){var d=this,e=[],f={title:{text:"",align:"high",style:{color:"#999"}},labels:{style:{fontSize:"12px"},formatter:function(){return("number"==typeof this.value?d._handleNumber(this.value):this.value)+(a[0]?a[0]:"")}}};if(b&&(f.min=0),e.push(f),c){var g={title:{text:"",align:"high",style:{color:"#999"}},labels:{style:{fontSize:"12px",color:"#CA943B"},formatter:function(){return("number"==typeof this.value?d._handleNumber(this.value):this.value)+(a[1]?a[1]:"")}},opposite:!0};b&&(g.min=0),e.push(g)}return e},_handleNumber:function(a){var b=1e8,c=1e4;return a>b?Math.round(a/b*100)/100+"亿":a>c?Math.round(a/c*100)/100+"万":a},_getAxisPlotLines:function(b){b=a.isArray(b)?b:[];var c=b.length,d=[];if(c&&a.date.isDate(b[0]))for(var e=0;e<b.length;e++)0==a.date.getWeekNum(b[e])&&d.push({color:"#6CC4ED",dashStyle:"DashDot",width:1,value:e});return d},getTooltip:function(b){var c=this;return{shared:!0,useHTML:!0,percentageDecimals:1,formatter:function(){var d='<table><tr><td colspan="2">'+this.x+c._getTooltipSeries(this.x)+"</td></tr>";return a.each(this.points,function(a,c){d+='<tr><td style="color: '+c.series.color+'" >'+(c.point.name?c.point.name:c.series.name)+"：</td><td>"+(Math.round(100*c.y)/100).toString().addCommas()+(b[c.series.index]?b[c.series.index]:b[0]?b[0]:"")+"</td>"+(c.point.per?"<td>("+c.point.per+")</td>":"")+"</tr>"}),d+="</table>"}}},_getTooltipSeries:function(b){return a.date.getChWeek(b)?"（"+a.date.getChWeek(b)+"）":""},getLegend:function(a){return a?{enabled:!1}:{}},getPlotOptions:function(a,b,c){var d=Math.ceil(c/b/2),e=!1;return d||(d=1),d>16&&(d=16)&&(e=!0),a?{column:{pointPadding:.2,borderWidth:0,cropThreshold:10,pointPadding:0,dataLabels:{x:0,y:60,enabled:!0},pointWidth:d},area:{marker:{color:"#9D8C7A",enabled:!0,states:{hover:{enabled:!0}}},fillOpacity:0,lineWidth:0,dataLabels:{color:"#9D8C7A",enabled:!0,formatter:function(){return this.point.per}}},line:{dataLabels:{color:"#E7A944",enabled:!0,x:-56,y:20,formatter:function(){return 0==this.point.x?"":this.point.per}}}}:{column:{pointPadding:.2,borderWidth:0,cropThreshold:10,pointPadding:0,dataLabels:{formatter:function(){return this.point.y},enabled:e},pointWidth:d},bar:{dataLabels:{enabled:!0},pointWidth:16}}}};var d=new b;c.prototype={getDateFormat:function(a,b){var c=36e5,d=36e5,e="%Y-%m-%d";switch(a){case"day":var f=2;b&&0!=b.length&&(f=Math.ceil(b[0].data.length/7),f>3&&14>f?f=7:f>=14&&27>f?f=14:f>=27&&(f=21)),c=24*c*f,d=24*c*f,e="%Y-%m-%d";break;case"min":c=6*c,d=24*d*1,e="%Y-%m-%d %H:%M";break;case"onlymin":c=6*c,d=24*d*1,e="%H:%M"}return e},getNavigatorXAxis:function(a){var b={};switch(a){case 1:b={dateTimeLabelFormats:{second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%Y-%m-%d",week:"%Y-%m-%d",month:"%Y-%m"}};break;case 2:b={tickInterval:189216e6}}return b},getTooltip:function(b,c){var e={};switch(b){case 1:e={shared:!0,useHTML:!0,formatter:function(){var b=Highcharts.dateFormat(c,this.x),e="<table><tr>"+b+d._getTooltipSeries(b)+"</tr>";return a.each(this.points,function(a,b){e+='<tr><td style="color: '+b.series.color+'" >'+b.series.name+"：</td><td>"+(Math.round(100*b.y)/100).toString().addCommas()+"</td></tr>"}),e}};break;case 2:e={shared:!0,useHTML:!0,formatter:function(){var b="<table>";return a.each(this.points,function(a,c){b+='<tr><td style="color: '+c.series.color+'" >'+c.series.name+"：</td><td>"+(Math.round(100*c.y)/100).toString().addCommas()+"</td></tr>"}),b}}}return e},getXAxis:function(a,b){var c={};switch(a){case 1:c={dateTimeLabelFormats:{second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:b&&"onlymin"==b?"-":"%m-%d",week:"%Y-%m-%d",month:"%Y-%m"}};break;case 2:c={tickInterval:189216e6}}return c},getSeries:function(b,c){if("day"==c){var d=[];if(b&&a.isArray(b))for(var f=0;f<b.length;f++)d.push({pointStart:b[f].pointStart,pointInterval:b[f].pointInterval,name:b[f].name,data:e.setMarker(b[f].data,b[f].pointStart,b[f].pointInterval)});return d}return b},getNaviSeries:function(b){return b&&a.isArray(b)&&b[0]?{pointStart:b[0].pointStart,pointInterval:b[0].pointInterval,name:b[0].name,data:e.setMarker(b[0].data,b[0].pointStart,b[0].pointInterval,!0)}:{}},setMarker:function(a,b,c,d){for(var e=[],f=0;f<a.length;f++){var g=new Date;g.setTime(b+f*c),e.push({y:a[f],marker:{enabled:d?!1:0==g.getDay()?!0:!1,symbol:d?null:0==g.getDay()?"url(./static/common/images/sun.png)":null}})}return e},getPlotOptions:function(a,b,c){var d=Math.ceil(b/a/2),e=!1;return d||(d=1),d>16&&(d=16)&&(e=!0),{column:{stacking:c,pointPadding:.2,borderWidth:0,cropThreshold:10,pointPadding:0,dataLabels:{formatter:function(){return this.point.y},enabled:e},pointWidth:d},line:{dataGrouping:{approximation:"open"}}}}};var e=new c;a.draw={options:{showNum:10,page:!0,chartData:[],doubleYAxis:!1,lineAreaColumn:!1,xUnit:[],yUnit:[],series:[],xAxisCategories:[],isSetYAxisMin:!0,chartType:"line",width:400,container:a("body"),chartStock:!1,columnStack:"",timeDimension:"day",xAxisType:1},colors:d.getColors("orange").colors,DrawFactory:function(b){this.options=a.extend({},a.draw.options,b),this.options.showNum=b.showNum?b.showNum:"bar"==this.options.chartType?10:Math.ceil(this.options.width-110)/48,this.chartData=this.options.chartData,this.series=this.options.series,this.xAxisCategories=this.options.xAxisCategories;var c=this,d=this.options;this._showChart=function(b,d){var e=0,f=[],g=[],h=[],i=c.series.length;b=b>=0&&i>b?b:0,e=i>=b+d?b+d:i,h=c.xAxisCategories.slice(b,e),g=c.series.slice(b,e),a.each(c.chartData,function(a){this.data=this.data?this.data:[];var d={data:this.data.slice(b,e),name:this.name};this.type&&(d.type=this.type),c.options.doubleYAxis&&1==a&&(d.yAxis=1),f.push(d)});var j=a.extend({},c.options,{chartData:f,series:g,xAxisCategories:h});"pie"==c.options.chartType?a.draw.drawPie(j):a.draw.drawChart(j)},this.chartData.length?d.chartStock?a.draw.drawStock(this.options):this.options.page?(c._showChart(0,d.showNum),new a.page.PageFactory({showNum:d.showNum,container:d.container.parent(),total:d.series.length,preEvent:function(a,b){c._showChart((a-1)*b,b)},nextEvent:function(a,b){c._showChart((a-1)*b,b)}})):"pie"==d.chartType?a.draw.drawPie(this.options):a.draw.drawChart(this.options):this.options.container.text("no data...")},drawChart:function(b){var c=b.container.get(0);a(c).highcharts({chart:{zoomType:"x",renderTo:c,type:b.chartType,width:b.width,height:300},colors:a.draw.colors,credits:{enabled:!1},title:{text:null},xAxis:d.getXAxis(b.series,b.xUnit,b.xAxisCategories),yAxis:d.getYAxis(b.yUnit,b.isSetYAxisMin,b.doubleYAxis),tooltip:d.getTooltip(b.yUnit),plotOptions:d.getPlotOptions(b.lineAreaColumn,b.series.length,b.width),legend:d.getLegend(b.lineAreaColumn),series:b.chartData}),a(c).highcharts().setSize(b.container.parent().width(),b.container.parent().height(),!1)},drawPie:function(b){var c=b.container.get(0);a(c).highcharts({chart:{renderTo:c,plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,marginBottom:0,marginTop:0,width:b.width,height:300,spacingBottom:0,spacingTop:0},colors:a.draw.colors,credits:{enabled:!1},title:{text:null},legend:{align:"right",verticalAlign:"bottom",layout:"vertical",labelFormatter:function(){return this.name+"：<b>"+(this.y?this.y:0)+(b.yUnit[0]?b.yUnit[0]:"")+"</b>("+(this.per?Math.round(10*this.per)/10:0)+"%)"},borderWidth:0,x:-20,y:-10,floating:!0,itemStyle:{height:"14px",lineHeight:"14px",fontSize:"12px",color:"#333"}},tooltip:{useHTML:!0,headerFormat:'<h4>{point.key}</h4><table style="margin-top: 5px;">',pointFormat:'<tr><td style="word-break: keep-all;" nowrap>{series.name}：</td><td style="text-align: right"><b>{point.y}</b></td><td>({point.per:.1f}%)</td></tr>',footerFormat:"</table>",percentageDecimals:1},plotOptions:{pie:{allowPointSelect:!0,center:["40%","50%"],cursor:"pointer",ignoreHiddenPoint:!0,dataLabels:{enabled:!1},showInLegend:!0}},series:[{type:"pie",name:"比例",data:b.chartData}]})},drawStock:function(b){new Highcharts.StockChart({chart:{zoomType:"x",type:b.chartType,renderTo:b.container.get(0),width:b.width,height:300},colors:a.draw.colors,title:{text:null},credits:{enabled:!1},series:e.getSeries(b.chartData,b.timeDimension),legend:{enabled:!0,align:"bottom",borderWidth:0,floating:!0,x:0,y:13},rangeSelector:{enabled:!1},navigator:{series:e.getNaviSeries(b.chartData),xAxis:e.getNavigatorXAxis(b.xAxisType)},plotOptions:e.getPlotOptions(b.series.length,b.width,b.columnStack),tooltip:e.getTooltip(b.xAxisType,e.getDateFormat(b.timeDimension,b.chartData)),xAxis:e.getXAxis(b.xAxisType,b.timeDimension),yAxis:{min:0}})}}}(jQuery,window,void 0);