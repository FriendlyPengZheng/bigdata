# 抓取洛克王国在线

------

## 机器及目录
192.168.71.37:/opt/data/roco

## 定时脚本
```sh
# roco online
*/1 * * * * /usr/bin/php /opt/data/roco/fetch.php >> /dev/null 2>&1
*/1 * * * * /usr/bin/php /opt/data/roco/stat.php >> /dev/null 2>&1
```

## 代码结构
- fetch.php 抓取在线
- stat.php 落统计日志
- code.php 向抓取程序发送验证码（仅登录出现验证码时使用）
- web/seccode.jpg 登录出现验证码时，会将验证码写入该文件

## 注意问题
- 登录出现验证码时，会以RTX和邮件的方式发送告警
- 收到告警后，人工识别web/seccode.jpg验证码后使用code.php向fetch.php发送之
```sh
php code.php {code} # {code}为验证码
```
- 如果安装机器上有PHP的web环境，可以直接访问web目录下的index.html，在页面上输入验证码