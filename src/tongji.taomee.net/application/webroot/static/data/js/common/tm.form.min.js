/*! taomee tongji javascript code by maverick 2015-02-04 */
!function(a){var b=function(b){this.options=a.extend({},this.options,b),this.element=null,this._create(),this._init()},c={},d={};a.extend(d,{apply:function(a,b,c){if(c&&d.apply(a,c),a&&b&&"object"==typeof b)for(var e in b)a[e]=b[e];return a},extend:function(){var a=function(a){for(var b in a)this[b]=a[b]},b=Object.prototype.constructor;return function(c,e,f){"object"==typeof e&&(f=e,e=c,c=f.constructor!=b?f.constructor:function(){e.apply(this,arguments)});var g,h=function(){},i=e.prototype;return h.prototype=i,g=c.prototype=new h,g.constructor=c,c.superclass=i,i.constructor==b&&(i.constructor=e),c.override=function(a){d.override(c,a)},g.superclass=g.supr=function(){return i},g.override=a,d.override(c,f),c.extend=function(a){return d.extend(c,a)},c}}(),override:function(a,b){if(b){var c=a.prototype;d.apply(c,b)}}}),c.field=d.extend(b,{options:{name:null,id:null,className:null,value:null,eventCallback:a.loop,attr:{}},getElement:function(){return this.element},getName:function(){return this.options.name},_createInputTag:function(b){var c="<input/>",d=this.options,e=d.attr;e.type=b,e.name=d.name,e.id=d.id,this.element=a(c).val(d.value).attr(e).addClass(d.className)},_create:function(){},_init:function(){this.element.on("blur keydown keyup click change",this.options.eventCallback)}}),c.textField=d.extend(c.field,{_create:function(){this._createInputTag("text")},setValue:function(a){return this.element.val(a),this},getValue:function(){return this.element.val()},validator:function(){}}),c.hiddenField=d.extend(c.field,{_create:function(){this._createInputTag("hidden")},setValue:function(a){return this.element.val(a),this},getValue:function(){return this.element.val()},validator:function(){}}),c.radioField=d.extend(c.field,{_create:function(){this._createInputTag("radio")},setValue:function(a){return a==this.options.value&&this.element.attr("checked",!0),this}}),c.checkboxField=d.extend(c.field,{_create:function(){this._createInputTag("checkbox")},setValue:function(a){return inArray(this.options.value,a)&&this.element.attr("checked",!0),this}}),c.label=d.extend(b,{options:{title:null,content:null,className:null},_create:function(){var b=this.options;this.element=a("<label>").text(b.title).addClass(b.className),b.content&&this.element.prepend(b.content.getElement())},_init:function(){},getElement:function(){return this.element}}),c.buttonField=d.extend(b,{options:{title:null,className:null,eventClick:a.loop},attr:{href:"javascript:void(0);"},_create:function(){var b=this.options;this.element=a("<a>").append(a("<span>").text(b.title)).addClass(b.className).attr(a.extend(this.attr,b.attr))},_init:function(){var a=this.options;this.element.click(function(){a.eventClick&&a.eventClick(this)})},getElement:function(){return this.element}}),c.fieldSet=d.extend(b,{options:function(){},_create:function(){this.formItems=[],this.items=this._initFields(this.options.items),this.element=a(document.createElement("ul")),this._appendLineFields()},_init:function(){},getElement:function(){return this.element},setValues:function(b){return a(this.formItems).each(function(){this.getName&&this.getName()&&this.setValue(b[this.getName()]?b[this.getName()]:null)}),this},_appendLineFields:function(){var b=this;a(this.items).each(function(){var c=a("<li class='widget-sel'></li>");this.line&&(c.attr(this.line.attr),this.line.cssStyle&&c.css(this.line.cssStyle)),this.label&&c.append(this.label.getElement()),c.append(b._appendInlineFields(this.items)),b.element.append(c)})},_appendInlineFields:function(b){var c=this,d=a();return a(b).each(function(){this.label&&(d=d.add(this.label.getElement())),this.item&&(d=d.add(this.item.getElement())),this.items&&(d=d.add(c._appendInlineFields(this.items)))}),d},_initFields:function(b){var d,e=this,f=[];return a(b).each(function(){var b={},g=a.extend({},this.label);this.type&&(d=this.type+"Field",this.labelWrap?(g.content=new c[d](this),e.formItems.push(g.content)):(b.item=new c[d](this),e.formItems.push(b.item))),a.isEmptyObject(g)||(b.label=new c.label(g)),this.items&&(b.items=e._initFields(this.items)),b.line=this.line,f.push(b)}),f}}),d.form=c,window.tm=a.extend(d,window.tm)}(jQuery);