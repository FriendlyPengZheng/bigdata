/*! taomee tongji javascript code by maverick 2015-02-04 */
!function(a){a.widget("uicart.item",{options:{zIndexBasic:100,timeDft:"0000-00-00 ~ 0000-00-00",timeMax:5,timeCount:0,timeInit:1,timeInfo:[],ckboxSelected:function(){},gameNameTxt:function(){a(this).text("More")},ItemNameTxt:function(){a(this).text("Game Custom Item")},setItemTime:function(){a(this).click(function(){console.log("set time")})},setItemAdd:function(){a(this).click(function(){var b=a(this).parent(),c=a(this).parent().parent(),d=c.find(".tag-area"),e=c.parent().parent(),f=a(this).parent().parent().parent().next().find(".item-fold"),g=145;b.height()<g&&(f.toggleClass("foldarea"),f.find(".icon").children().eq(0).toggleClass("icon-itemfold"),f.find(".icon").children().eq(0).toggleClass("icon-itemunfold")),b.animate({height:"145px"},"fast"),d.animate({height:"145px"},"fast"),c.animate({height:"145px"},"fast"),e.animate({height:"215px"},"fast"),e.find(".item-fold").animate({marginTop:"178px"},"fast",function(){a(this).show(),d.find(".time-tag").not(".dft").show()})})},setItemClose:function(){a(this).click(function(){var b=a(this).parent().parent();b.fadeOut("slow",function(){a(this).remove()})})},setItemFold:function(){a(this).click(function(){a(this).toggleClass("foldarea"),a(this).find(".icon").children().eq(0).toggleClass("icon-itemfold"),a(this).find(".icon").children().eq(0).toggleClass("icon-itemunfold");var b=a(this),c=a(this).parent().parent(),d=c.find(".time-area"),e=d.find(".add-area"),f=d.find(".tag-area");a(this).hasClass("foldarea")?(f.find(".time-tag").not(".dft").fadeOut("fast"),b.animate({marginTop:"62px"},"fast"),c.animate({height:"100px"},"fast"),d.animate({height:"30px"},"fast"),e.animate({height:"30px"},"fast"),f.animate({height:"30px"},"fast")):(e.animate({height:"145px"},"fast"),f.animate({height:"145px"},"fast"),d.animate({height:"145px"},"fast"),c.animate({height:"215px"},"fast"),c.find(".item-fold").animate({marginTop:"178px"},"fast",function(){a(this).show(),f.find(".time-tag").not(".dft").show()}))})}},_create:function(){var a=this._setCheckBox();this.options.ckboxSelected.call(a);var b=this._setItemInfo(),c=(this._setItemOpArea(),this._setGameName());this.options.gameNameTxt.call(c);var d=this._setItemName();this.options.ItemNameTxt.call(d);var e=this._setItemTime();this.options.setItemTime.call(e);var f=this._setTimeDel();this._delTime(f,"click");var g=this._setItemAdd();this.options.setItemAdd.call(g),this._alterTime(g,"click"),this._timeCache(b.find(".tag-area"));var h=this._setItemClose();this.options.setItemClose.call(h);var i=this._setItemFold();this.options.setItemFold.call(i)},_setCheckBox:function(){return this.item=a(document.createElement("div")).addClass("item-ins").appendTo(this.element),this.checkboxCon=a(document.createElement("div")).addClass("checkbox-con").appendTo(this.item),this.checkbox=a(document.createElement("input")).attr({type:"checkbox"}).addClass("check-item").appendTo(this.checkboxCon),this.checkbox.trigger("click"),this.checkbox},_setItemInfo:function(){return this.iteminfo=a(document.createElement("div")).addClass("item-info").appendTo(this.item),this.iteminfo},_setItemOpArea:function(){return this.opCon=a(document.createElement("div")).addClass("op-area").appendTo(this.item),this.opCon},_setGameName:function(){return this.itemNameArea=a(document.createElement("div")).addClass("itemname-area").appendTo(this.iteminfo),this.itemGameCon=a(document.createElement("div")).addClass("itemgame-con").appendTo(this.itemNameArea),this.itemGame=a(document.createElement("span")).addClass("item-game").appendTo(this.itemGameCon),this.itemGame},_setItemName:function(){return this.itemNameCon=a(document.createElement("div")).addClass("itemname-con").appendTo(this.itemNameArea),this.itemName=a(document.createElement("span")).addClass("item-name").appendTo(this.itemNameCon),this.itemName},_setItemTime:function(){return this.itemTimeArea=a(document.createElement("div")).addClass("time-area").appendTo(this.iteminfo),this.itemTimeTagArea=a(document.createElement("div")).addClass("tag-area").appendTo(this.itemTimeArea),this._addTimeHead(this)},_setTimeDel:function(){return this._addTimeDel(this)},_setItemAdd:function(){return this.itemTimeAddArea=a(document.createElement("div")).addClass("add-area").appendTo(this.itemTimeArea),this.itemTAdd=a(document.createElement("div")).addClass("tag-con").appendTo(this.itemTimeAddArea),this.iconAdd=a(document.createElement("div")).addClass("icon").appendTo(this.itemTAdd),this.iconTimeAdd=a(document.createElement("div")).addClass("icon-timeadd").appendTo(this.iconAdd),this.itemTAdd},_setItemClose:function(){return this.itemClose=a(document.createElement("div")).addClass("item-close").appendTo(this.opCon),this.iconClose=a(document.createElement("div")).addClass("icon").appendTo(this.itemClose),this.iconItemClose=a(document.createElement("div")).addClass("icon-itemclose").appendTo(this.iconClose),this.itemClose},_setItemFold:function(){return this.itemFold=a(document.createElement("div")).addClass("item-fold foldarea").appendTo(this.opCon),this.iconFold=a(document.createElement("div")).addClass("icon").appendTo(this.itemFold),this.iconItemFold=a(document.createElement("div")).addClass("icon-itemunfold").appendTo(this.iconFold),this.itemFold},_addTimeHead:function(b){return b.itemTimeHead=a(document.createElement("div")).addClass("time-tag").appendTo(b.itemTimeTagArea),0==b.options.timeCount&&b.itemTimeHead.addClass("dft"),b.itemTimeDft=a(document.createElement("input")).attr({type:"text"}).val(b.options.timeDft).addClass("datepick").appendTo(b.itemTimeHead),b.options.timeCount+=1,b.itemTimeDft},_addTimeDel:function(b){return b.itemClose=a(document.createElement("div")).addClass("time-close").appendTo(b.itemTimeHead),b.itemTimeHead.hasClass("dft")&&b.itemClose.hide(),b.iconClose=a(document.createElement("div")).addClass("icon").appendTo(b.itemClose),b.iconItemClose=a(document.createElement("div")).addClass("icon-timeclose").appendTo(b.iconClose),b.itemClose},_alterTime:function(a,b){var c=this;a.on(b,function(){c._trigger("addtime"),c.options.timeMax>c.options.timeCount&&c._addTime()})},_addTime:function(){var a=this,b=a._addTimeHead(a),c=a._addTimeDel(a);return a.options.setItemTime.call(b),a._delTime(c,"click"),b},_delTime:function(b,c){var d=this;b.on(c,function(){d._trigger("deltime"),a(this).parent().hasClass("dft")||a(this).parent().fadeOut("fast",function(){a(this).remove(),d.options.timeCount-=1})})},_timeCache:function(a){for(var b=0;b<this.options.timeInit-1;b++){var c=this._addTime();console.log(c),c.parent().hide()}for(var d=0;d<this.options.timeInfo.length;d++){var e=this.options.timeInfo[d].from+"~"+this.options.timeInfo[d].to;a.children().eq(d).find("input").val(e)}},destroy:function(){this.item.remove(),a.Widget.prototype.destroy.apply(this,arguments)}})}(jQuery);