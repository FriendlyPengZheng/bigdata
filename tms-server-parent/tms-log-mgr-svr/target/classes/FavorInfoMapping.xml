<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.taomee.tms.mgr.dao.FavorInfoDao">
	<resultMap id="FavorInfoMap" type="com.taomee.tms.mgr.entity.FavorInfo">
		<id column="favor_id" property="favorId" jdbcType="INTEGER" />
		<result column="favor_name" property="favorName" jdbcType="VARCHAR" />
		<result column="favor_type" property="favorType" jdbcType="INTEGER" />
		<result column="layout" property="layout" jdbcType="INTEGER" />
		<result column="game_id" property="gameId"
			jdbcType="INTEGER" />
		<result column="user_id" property="userId" jdbcType="INTEGER" />
		<result column="ctime" property="cTime" jdbcType="TIMESTAMP"
			javaType="java.sql.Timestamp" />
		<result column="is_default" property="isDefault" jdbcType="INTEGER" />
		<result column="display_order" property="displayOrder" jdbcType="INTEGER" />
	</resultMap>
	
	
	<sql id="FavorInfoColumnList">
		favor_id, favor_name, favor_type, layout, game_id, user_id, ctime, is_default, display_order
	</sql>
	
	
	<insert id="insertFavorInfo" parameterType="com.taomee.tms.mgr.entity.FavorInfo"
		useGeneratedKeys="true" keyProperty="favorId">
		insert into t_web_favor (favor_name, favor_type, layout, game_id, user_id, is_default)
		values (#{favorName,jdbcType=VARCHAR}, #{favor_type,jdbcType=INTEGER}, #{layout,jdbcType=INTEGER},
		 #{game_id,jdbcType=INTEGER},  #{user_id,jdbcType=INTEGER},  #{is_default,jdbcType=INTEGER})
	</insert>
	
	<select id="getFavorByfavorId" resultMap="FavorInfoMap" parameterType="java.lang.Integer">
		select 
		<include refid="FavorInfoColumnList" />
		from t_web_favor 
		where favor_id=#{favorId}
	</select>

	
	<select id="getListByUserId" parameterType="java.lang.Integer" resultMap="FavorInfoMap">
		select 
		<include refid="FavorInfoColumnList" />
		from t_web_favor
		<where>
			<if test="userId!=null and userId!=0">
				user_id=#{userId}
			</if>
			<if test="favorType!=null and favorType!=0">
				 and favor_type=#{favorType}
			</if>
		</where>
		order by favor_id
	</select>
	
	<update id="updateFavorByUserId" parameterType="java.lang.Integer">
		update
		t_web_favor
		set
		user_id=#{userId}, is_default=#{isDefault}
		where user_id = #{userId,jdbcType=INTEGER}
	</update>
	
	
	<update id="updateFavorByfavorId" parameterType="java.lang.Integer">
		update
		t_web_favor
		set
		favor_id=#{favorId}, is_default=#{isDefault}
		where favor_id = #{favorId,jdbcType=INTEGER}
	</update>
	
	<delete id="deleteFavorByfavorId" parameterType="java.lang.Integer">
		delete from
		t_web_favor
		where favor_id = #{favorId,jdbcType=INTEGER}
	</delete>
	
</mapper>