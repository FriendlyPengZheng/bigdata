<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.taomee.tms.mgr.dao.FavorSetInfoDao">
	<resultMap id="FavorSetInfoMap" type="com.taomee.tms.mgr.entity.FavorSetInfo">
		<id column="set_id" property="id" jdbcType="INTEGER" />
		<result column="set_name" property="dataName" jdbcType="VARCHAR" />
		<result column="game_id" property="gameId" jdbcType="INTEGER" />
		<result column="component_id" property="componentId" jdbcType="INTEGER" />
		<result column="data_index" property="dataIndex" jdbcType="VARCHAR" />
		<result column="auth_id" property="authId" jdbcType="VARCHAR" />
	</resultMap>

	
	<!-- <insert id="insertSetInfo" parameterType="com.taomee.tms.mgr.entity.FavorSetInfo"
		useGeneratedKeys="true" keyProperty="setId"   keyColumn="set_id">
		insert into t_web_set (set_name, game_id, component_id, data_index, auth_id)
		values (#{dataName,jdbcType=VARCHAR}, #{gameId,jdbcType=INTEGER}, #{componentId,jdbcType=INTEGER},
		 #{dataIndex,jdbcType=VARCHAR},  #{authId,jdbcType=VARCHAR})
		ON DUPLICATE KEY UPDATE
		game_id=#{gameId} and component_id=#{componentId}
	</insert>
	 -->
	<sql id="insertTableSql">
        (
            `set_name`,
            `game_id`,
            `component_id`,
            `data_index`,
            `auth_id`
        )
     </sql>
	
	<sql id="insertSql">
        (
            #{dataName},
            #{gameId},
            #{componentId},
            #{dataIndex},
            #{authId}
        )
    </sql>
 

    <sql id="onDuplicateKeyUpdate">
        set_name = #{dataName},
        data_index = #{dataIndex},
        auth_id = #{authId}
     </sql>

	<select id="getSetInfoByGameIdComponentId" resultType="java.lang.Integer">
		select set_id  from t_web_set
		where game_id=#{gameId} and component_id=#{componentId}
	</select>
	
	<insert id="insertSetInfo" parameterType="com.taomee.tms.mgr.entity.FavorSetInfo" 
		useGeneratedKeys="true" keyProperty="id">
        insert into t_web_set <include refid="insertTableSql" />
        values <include refid="insertSql" />
    </insert>
    
    
    <update id="updateSetInfo" parameterType="com.taomee.tms.mgr.entity.FavorSetInfo">
		update  t_web_set
		set 
			set_name = #{dataName},
			data_index = #{dataIndex},
			auth_id = #{authId}
		where set_id = #{id,jdbcType=INTEGER}
	</update>

</mapper>